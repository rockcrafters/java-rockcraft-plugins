import java.io.*;

File target = new File( basedir, "target" );

// Check that rockcraft.yaml was generated
var files = target.listFiles(new FilenameFilter(){
    public boolean accept(File dir, String name) {
        return name.equals("rockcraft.yaml");
    }
});

if ( files == null || files.length == 0 )
{
    throw new FileNotFoundException( "Could not find generated rockcraft.yaml file in " + target.getAbsolutePath() );
}

BufferedReader reader = new BufferedReader(new FileReader(files[0]));
String line;
while ( (line = reader.readLine()) != null) {
    if (line.contains("openjdk-11-jdk-headless")) {
        return;
    }
    System.out.println(line);
}
throw new RuntimeException("Expected openjdk-11-jdk, but it was not found");

